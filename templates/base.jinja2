<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Wazapp</title>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href='http://fonts.googleapis.com/css?family=Bangers' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/static/default.css">
    <style type="text/css">
      html, body, #map-canvas { width: 100%; height: 100%; margin: 0; padding: 0; display: block}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js">
    </script>
    <script src="static/jquery-1.11.2.js"></script>
  </head>
  <body>
    <header>
      <h1>Wazapp</h1>
     <!--  <nav>
        <ul>
          <li><a href="/">Home</a></li>
        </ul>
      </nav> -->
    </header>
    <section id="content">
     <!--  {% block body %}{% endblock %} -->
        <div id="map-canvas"></div>
       <!--  {% for entry in entries %}
          <article class="entry" id="entry={{entry.id}}">
          <h3>{{ entry.title }}</h3>
            <p class="dateline">{{ entry.created.strftime('%b. %d, %Y') }}
            <div class="entry_body">
            {{ entry.tweet|safe }}
            </div>
           </article>
           {% else %}
          <div class="entry">
            <p><em>Map is Missing in Action</em></p>
          </div>
         {% endfor %} -->
         <div id="sidebar">
         </div>
    </section>
    <footer>
        <script type="text/javascript">
      var map;
      function initialize() {
        var mapOptions = {
          center: { lat: 47.645101, lng: 237.658112},
          zoom: 13
      };
        map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);
        map.data.loadGeoJson("/static/venue.json");

        map.data.addListener('click', function(event) {
          console.log(event.feature)
          var lat = event.feature["k"]["lat"];
          var lng = event.feature["k"]["lng"];

          //TODO: add tweets to sidebar 
          // $.ajax({
          //     url: '/getTweets',
          //     type: 'GET',
          //     dataType: 'json',
          //     data: {'lat': lat, 'lng': lng},
          //     success: function(result){
          //     };
          //});
          $('#sidebar').toggleClass("sidebar--active");
        });
      }
      // Load geojson data
      google.maps.event.addDomListener(window, 'load', initialize);
      // map.data.addListener('click', function(event) {
      //   document.getElementById('sidebar').toggleClass(".sidebar--active");
        // event.feature
    </script>
    </footer>
  </body>
</html>